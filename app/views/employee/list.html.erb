<h1><%=getLongName('table_name','employees')%>一覧</h1>
<br/>
<%= link_to '入社・退社年月日一覧', :action => 'list' %> | 
<%= link_to '住所・電話番号一覧', :action => 'address_list' %>
<br/>
<br/>
<%= paginate(@employees) %>

<table class="list_table">
  <tr >
    <th>No</th>
    <th>ログインId</th> 
    <th>部署</th> 
    <th><%=getLongName('employees','insurance_code')%></th> 
    <th>氏名</th> 
    <% if controller.action_name.match(/address_list.*/) or controller.action_name.match(/order_by_zip1.*/) or controller.action_name.match(/order_by_tel1.*/) %>
      <th><%=link_to '↑', {:action => 'order_by_zip1_asc' }, :method => :post %>郵便番号<%=link_to '↓', {:action => 'order_by_zip1_desc' }, :method => :post %></th> 
      <th>住所</th> 
      <th><%=link_to '↑', {:action => 'order_by_tel1_asc' }, :method => :post %>電話番号<%=link_to '↓', {:action => 'order_by_tel1_desc' }, :method => :post %></th> 
    <% else %>
      <th>年齢</th> 
      <th><%=link_to '↑', {:action => 'order_by_birthday_asc' }, :method => :post %><%=getLongName('employees','birthday_date')%><%=link_to '↓', {:action => 'order_by_birthday_desc' }, :method => :post %></th> 
      <th><%=link_to '↑', {:action => 'order_by_entry_date_asc' }, :method => :post %>入社年月日<%=link_to '↓', {:action => 'order_by_entry_date_desc' }, :method => :post %></th> 
      <th>退社年月日</th> 
      <th>勤務年月数</th>
    <% end %>
    <th> </th>
  </tr>
  
<% @employees.each_index do |idx| employee = @employees[idx] %>
  <tr>
    <td align="center"><%=h (idx+1) %></td>
    <td><%=h employee.user.login %></td>
    <td><%=h employee.department.department_name %></td>
    <td ><%=h employee.insurance_code %></td>
    <td ><%= link_to "#{employee.employee_name}", :action => 'show', :id => employee %></td>
    <% if controller.action_name.match(/address_list.*/) or controller.action_name.match(/order_by_zip1.*/) or controller.action_name.match(/order_by_tel1.*/) %>
      <td align="center"><%=h employee.zip1 %></td>
      <td ><%=h employee.address1 %></td>
      <td align="center"><%=h employee.tel1 %></td>
    <% else %>
      <td align="center"><%=h employee.calAge %></td>
      <td align="center"><%=h employee.birthday_date.to_date if employee.birthday_date != nil %></td>
      <td align="center"><%=h employee.entry_date.to_date if employee.entry_date != nil %></td>
      <td align="center"><%=h employee.resignation_date.to_date if employee.resignation_date != nil %></td>
      <td align="center"><%=h employee.calWorkingYearMonth %></td>
    <% end %>
    <td>
      <%= link_to '銀行情報', :action => 'edit_bank', :id => employee %> | 
      <% route_expense = RouteExpense.find(:first, :conditions => ["user_id = ? and active_flg = ?", employee.user_id, 1]) %>
      <% if route_expense %>
        <%= link_to '交通経路費', :controller => 'route_expense', :action => 'show', :id => route_expense %> | 
      <% else %>
        <%= link_to '交通経路費', :controller => 'route_expense', :action => 'new', :employee_id => employee %> | 
      <% end %>
      <%= link_to '職務履歴', :controller => 'employee_history', :action => 'list', :employee_id => employee %>
      <%= link_to '扶養家族', :controller => 'employee_family', :action => 'list', :employee_id => employee %>
      <% if false %>
      <%= link_to '削除', { :action => 'destroy', :id => employee }, :confirm => 'この情報を削除します。よろしいですか?', :method => :post %>
      <% end %>
    </td>
  </tr>
<% end %>

</table>
<br>

<%= paginate(@employees) %>

<br />

<%= link_to (getLongName('table_name','employees')+'の新規作成'), :action => 'new' %>
